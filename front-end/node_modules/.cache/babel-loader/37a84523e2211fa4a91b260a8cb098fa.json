{"remainingRequest":"D:\\Desktop\\Keno\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\Keno\\front-end\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Desktop\\Keno\\front-end\\src\\store\\modules\\auth.js","dependencies":[{"path":"D:\\Desktop\\Keno\\front-end\\src\\store\\modules\\auth.js","mtime":1577619955794},{"path":"D:\\Desktop\\Keno\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\Keno\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\Keno\\front-end\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRDpcXERlc2t0b3BcXEtlbm9cXGZyb250LWVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKdmFyIF9hY3Rpb25zLCBfbXV0YXRpb25zOwoKLyogZXNsaW50LWRpc2FibGUgcHJvbWlzZS9wYXJhbS1uYW1lcyAqLwppbXBvcnQgeyBBVVRIX1JFUVVFU1QsIEFVVEhfRVJST1IsIEFVVEhfU1VDQ0VTUywgQVVUSF9MT0dPVVQgfSBmcm9tICcuLi9hY3Rpb25zL2F1dGgnOwppbXBvcnQgeyBVU0VSX1JFUVVFU1QgfSBmcm9tICcuLi9hY3Rpb25zL3VzZXInOwppbXBvcnQgYXBpQ2FsbCBmcm9tICcuLi8uLi91dGlscy9hcGknOwp2YXIgc3RhdGUgPSB7CiAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyLXRva2VuJykgfHwgJycsCiAgc3RhdHVzOiAnJywKICBoYXNMb2FkZWRPbmNlOiBmYWxzZQp9Owp2YXIgZ2V0dGVycyA9IHsKICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgcmV0dXJuICEhc3RhdGUudG9rZW47CiAgfSwKICBhdXRoU3RhdHVzOiBmdW5jdGlvbiBhdXRoU3RhdHVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuc3RhdHVzOwogIH0KfTsKdmFyIGFjdGlvbnMgPSAoX2FjdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBBVVRIX1JFUVVFU1QsIGZ1bmN0aW9uIChfcmVmLCB1c2VyKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGNvbW1pdChBVVRIX1JFUVVFU1QpOwogICAgYXBpQ2FsbCh7CiAgICAgIHVybDogJ2F1dGgnLAogICAgICBkYXRhOiB1c2VyLAogICAgICBtZXRob2Q6ICdQT1NUJwogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlci10b2tlbicsIHJlc3AudG9rZW4pOyAvLyBIZXJlIHNldCB0aGUgaGVhZGVyIG9mIHlvdXIgYWpheCBsaWJyYXJ5IHRvIHRoZSB0b2tlbiB2YWx1ZS4KICAgICAgLy8gZXhhbXBsZSB3aXRoIGF4aW9zCiAgICAgIC8vYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHJlc3AudG9rZW4KCiAgICAgIGNvbW1pdChBVVRIX1NVQ0NFU1MsIHJlc3ApOwogICAgICBkaXNwYXRjaChVU0VSX1JFUVVFU1QpOwogICAgICByZXNvbHZlKHJlc3ApOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb21taXQoQVVUSF9FUlJPUiwgZXJyKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXItdG9rZW4nKTsKICAgICAgcmVqZWN0KGVycik7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgQVVUSF9MT0dPVVQsIGZ1bmN0aW9uIChfcmVmMikgewogIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBjb21taXQoQVVUSF9MT0dPVVQpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXItdG9rZW4nKTsKICAgIHJlc29sdmUoKTsKICB9KTsKfSksIF9hY3Rpb25zKTsKdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBBVVRIX1JFUVVFU1QsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLnN0YXR1cyA9ICdsb2FkaW5nJzsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBBVVRIX1NVQ0NFU1MsIGZ1bmN0aW9uIChzdGF0ZSwgcmVzcCkgewogIHN0YXRlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICBzdGF0ZS50b2tlbiA9IHJlc3AudG9rZW47CiAgc3RhdGUuaGFzTG9hZGVkT25jZSA9IHRydWU7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQVVUSF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUuc3RhdHVzID0gJ2Vycm9yJzsKICBzdGF0ZS5oYXNMb2FkZWRPbmNlID0gdHJ1ZTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBBVVRIX0xPR09VVCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUudG9rZW4gPSAnJzsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["D:/Desktop/Keno/front-end/src/store/modules/auth.js"],"names":["AUTH_REQUEST","AUTH_ERROR","AUTH_SUCCESS","AUTH_LOGOUT","USER_REQUEST","apiCall","state","token","localStorage","getItem","status","hasLoadedOnce","getters","isAuthenticated","authStatus","actions","user","commit","dispatch","Promise","resolve","reject","url","data","method","then","resp","setItem","catch","err","removeItem","mutations"],"mappings":"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","sourcesContent":["/* eslint-disable promise/param-names */\nimport { AUTH_REQUEST, AUTH_ERROR, AUTH_SUCCESS, AUTH_LOGOUT } from '../actions/auth'\nimport { USER_REQUEST } from '../actions/user'\nimport apiCall from '../../utils/api'\n\nconst state = { token: localStorage.getItem('user-token') || '', status: '', hasLoadedOnce: false }\n\nconst getters = {\n    isAuthenticated: state => !!state.token,\n    authStatus: state => state.status,\n}\n\nconst actions = {\n    [AUTH_REQUEST]: ({ commit, dispatch }, user) => new Promise((resolve, reject) => {\n        commit(AUTH_REQUEST)\n        apiCall({ url: 'auth', data: user, method: 'POST' })\n            .then(resp => {\n                localStorage.setItem('user-token', resp.token)\n                    // Here set the header of your ajax library to the token value.\n                    // example with axios\n                    //axios.defaults.headers.common['Authorization'] = resp.token\n                commit(AUTH_SUCCESS, resp)\n                dispatch(USER_REQUEST)\n                resolve(resp)\n            })\n            .catch(err => {\n                commit(AUTH_ERROR, err)\n                localStorage.removeItem('user-token')\n                reject(err)\n            })\n    }),\n    [AUTH_LOGOUT]: ({ commit }) => {\n        return new Promise((resolve) => {\n            commit(AUTH_LOGOUT)\n            localStorage.removeItem('user-token')\n            resolve()\n        })\n    }\n}\n\nconst mutations = {\n    [AUTH_REQUEST]: (state) => {\n        state.status = 'loading'\n    },\n    [AUTH_SUCCESS]: (state, resp) => {\n        state.status = 'success'\n        state.token = resp.token\n        state.hasLoadedOnce = true\n    },\n    [AUTH_ERROR]: (state) => {\n        state.status = 'error'\n        state.hasLoadedOnce = true\n    },\n    [AUTH_LOGOUT]: (state) => {\n        state.token = ''\n    }\n}\n\nexport default {\n    state,\n    getters,\n    actions,\n    mutations,\n}"]}]}